#!/usr/bin/env perl

# Auto IRC Bot. An advanced, lightweight and powerful IRC bot.
# Copyright (C) 2010-2011 Xelhua Development Team (doc/CREDITS)
# This program is free software; rights to this code are stated in doc/LICENSE.
package Auto;
require 5.10.0;
use strict;
use warnings;
use POSIX;
use locale;
use Mouse;
use IO::Socket;
use Async;
use FindBin qw($Bin);
our $Bin = $Bin;
BEGIN { unshift(@INC, "$Bin/../src"); }
use API::Std;
use API::Log qw(println alog);
#use DB::Flatfile;
use Parser::Config;
use Parser::Lang;
#use Parser::IRC;
#use Sys;

# Set version information.
use constant {
	NAME   => 'Auto IRC Bot',
	VER    => 3,
	SVER   => 0,
	REV    => 0,
	RSTAGE => 'd'
};

# Check for debug mode.
our $DEBUG = 0;
if (defined $ARGV[0]) {
	if ($ARGV[0] eq '-d') {
		$DEBUG = 1;
	}
}

# Parse configuration file.
our $CONF = Parser::Config->new("auto.conf") or print "Failed to open configuration file.\n" and exit;
our %SETTINGS = $CONF->parse;

# Parse translations.
my @lclv = API::Std::conf_get("locale");
our $LOCALE = $lclv[0][0];
my @lang = split('_', $LOCALE);
Parser::Lang::parse($lang[0]);
undef @lang;
undef @lclv;

# Expire old logs.
API::Log::expire_logs();
